<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="./assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Junge Liberale | Content Generator</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/now-ui-kit.css?v=1.1.0" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="./assets/css/demo.css" rel="stylesheet" />
  
    <style>
      @font-face {
        font-family: "Montserrat-Regular";
        src: url("./assets/fonts/Montserrat-Regular.otf");
      }
      
      
      .mag-text {
        font-family: "Montserrat-Regular", Arial, sans-serif;
        color: #e5007d;
      }
      
      .blue-button{
        background-color: #009ee3;
      }
      
      .blue-button:hover{
        background-color: #009ea3;
      }
      
      .attention:hover{
        border: 2px solid #009ee3;
      }
      
      .testimonial-group > .row {
        overflow-x: auto;
        white-space: nowrap;
      }
      .testimonial-group > .row > .col-xs-4 {
        display: inline-block;
        float: none;
      }
      .dimg {
        filter: gray; /* IE6-9 */
        -webkit-filter: grayscale(1); /* Google Chrome, Safari 6+ & Opera 15+ */
          -webkit-box-shadow: 0px 2px 6px 2px rgba(0,0,0,0.75);
          -moz-box-shadow: 0px 2px 6px 2px rgba(0,0,0,0.75);
          box-shadow: 0px 2px 6px 2px rgba(0,0,0,0.75);
          margin-bottom:20px;
      }

      .dimg:hover {
        filter: none; /* IE6-9 */
        -webkit-filter: grayscale(0); /* Google Chrome, Safari 6+ & Opera 15+ */

}
      </style>
</head>

<body style="background-color: #ffed00;">
    <div id="init" class="page-header">
      <div class="container">
          <div class="col-md-4 content-center">
              <div class="card card-login card-plain">
                  <form class="form" method="" action="">
                      <div class="header header-primary text-center">
                          <img  class="img-fluid" src="./assets/img/Logo-Junge-Liberale-web.png" alt="">
                      </div>
                      <br>
                      <div class="content">
                          <h5 class="mag-text"><b>Content Generator</b></h5>
                          <p class="mag-text"><b>Please press "Get Started" button to start creating.</b></p>
                      </div>
                      <div id="hide-btn" class="footer text-center">
                          <a class="btn btn-info btn-lg"><b>Get Started</b></a>
                      </div>
                  </form>
              </div>
          </div>
      </div>
    </div>
  
    <div id="editor" style="display: none;">
      <img  class="img-fluid" src="./assets/img/Logo-Junge-Liberale-web.png" alt="" style="height: 10vh">
      <canvas id="visible"></canvas>
      <div class="container">
        <div class="row">
          <div class="text-center">
            <button id="upload" type="button" class="btn btn-sm btn-info float-right"> <i class="fa fa-upload"></i> Upload </button> 
            <input type="file" id="imgLoader" class="form-control" placeholder="Default" style="display: none">   
          </div>
        </div>
      </div>
      
      <br>
        <div class="container testimonial-group">
          <div class="row">
            <div class="col-12 mag-text">
              Add Frame
            </div>
          </div>
          <div class="row">
            <div class="frame-div  col-md-3 col-sm-4 col-xs-6 attention">
              <img  class="img-fluid" src="./assets/img/Vorlage Rahmen.png" alt="">
            </div>
          </div>
        </div>

        <br>

        <div class="container">
          <div class="row">
            <div class="col-12 mag-text">
              Add Banner
            </div>
          </div>
          <div class="row">
            <div class="banner-div col-md-3 col-sm-4 col-xs-6 attention" style="background-color: white">
              <img  class="img-fluid" src="./assets/img/Text Balken Hintergrund 4.png" alt="">
            </div>
            <div class="banner-div col-md-3 col-sm-4 col-xs-6 attention">
              <img  class="img-fluid" src="./assets/img/Text Balken Hintergrund.png" alt="">
            </div>
          </div>
        </div>

        <br>

        <div class="container">
          <div class="row">
            <div class="col mag-text">
              Add Text
            </div>
          </div>
          <div class="row" style="padding: 30px">
            <div>
              Please choose color
              <input type="color">
            </div>
          </div>
          <br>
          <div class="row" style="padding: 30px">
            <input type="text" placeholder="" class="form-control" style="border: 0px solid white; border-radius: 0px; border-bottom: 2px solid #009ee3">
            <button class="btn btn-info"> Add</button>
          </div>
        </div>
        <br>
        <div class="container">
          <div class="row">
            <div class="col-12 text-center">
              <button class="btn btn-info"> Download Image</button>
            </div>
          </div>
        </div>
  </div>
</body>
<!--   Core JS Files   -->
<script src="./assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="./assets/js/plugins/bootstrap-switch.js"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
<!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
<script src="./assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
<!-- Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc -->
<script src="./assets/js/now-ui-kit.js?v=1.1.0" type="text/javascript"></script>

<!--  Fabric Js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.20/fabric.min.js" type="text/javascript"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
  
<script>
  $('#hide-btn').on('click', function(){
    $('#init').fadeOut('slow');
    $('#editor').show('slow');
  });
  
  var back_img_src = "./assets/img/nophoto.jpg", frame_src = null, banner_src = null, slogan_text = null, text_color = null;
  var canvas = new fabric.Canvas('visible',  { width: window.innerWidth });
    
  function render(cur_canvas){
      canvas.clear();
      var back_img = new Image();
      back_img.src = back_img_src;
      var scale_value = window.innerWidth / back_img.width;
      cur_canvas.setWidth(back_img.width * scale_value);
      cur_canvas.setHeight(back_img.height * scale_value);
      cur_canvas.setBackgroundImage(back_img_src, canvas.renderAll.bind(cur_canvas), {
            scaleX: scale_value,
            scaleY: scale_value,
            left: 0,
            top: 0
      });
      if(frame_src != null){
        var fr_image = new Image();
        fr_image.src = frame_src;
        fr_image.onload = function(){
          var frame = new fabric.Image(fr_image);
          frame.set({
            height : canvas.height,
            width : canvas.width,
            top : 0,
            left : 0,
            lockMovementX : true,
            lockMovementY : true,
            lockScalingX : true,
            lockScalingY : true,
            lockMovementX : true,
            lockRotation : true,
          });
          canvas.add(frame);
          canvas.bringToFront(frame)
        }
      }
    
       if(banner_src != null){
        var bn_image = new Image();
        bn_image.src = banner_src;
        bn_image.onload = function(){
          var banner = new fabric.Image(bn_image);
          var scale_banner = (canvas.width - 200) / bn_image.width;
          banner.set({
            height : bn_image.height * scale_banner,
            width : bn_image.width * scale_banner,
            top : 100,
            left : 100,
          });
          canvas.add(banner);
          canvas.bringToFront(banner)
        }
      }
    }

    $(function(){
      render(canvas);
      setTimeout(function(){ render(canvas); }, 500);
      setTimeout(function(){ render(canvas); }, 500)
    })
  
    document.getElementById('imgLoader').onchange = function handleImage(e) {
      var reader = new FileReader();
      reader.onload = function (event) {
          back_img_src = event.target.result;
          render(canvas);
          setTimeout(function(){ 
            render(canvas); 
          }, 500);
          setTimeout(function(){ 
            render(canvas); 
          }, 500)
      }
      reader.readAsDataURL(e.target.files[0]);
    };

    $(window).on('resize', function(){
      render(canvas);
    });

    $('#upload').on('click', function(){
      $('#imgLoader').click();
    });
  
    $('.frame-div').on('click', function(){
      frame_src = $(this).find('img').attr('src');
      render(canvas);
    });
  
    $('.banner-div').on('click', function(){
      banner_src = $(this).find('img').attr('src');
      render(canvas);
    });
</script>
</html>
